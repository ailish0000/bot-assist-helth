# üîß –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ "No context"

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:**
–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≤ —á–∞—Ç–µ, –≤—ã–¥–∞–≤–∞—è –æ—à–∏–±–∫—É "No context" –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π.

---

## ‚úÖ **–†–ï–®–ï–ù–ò–Ø (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):**

### **1. üîç –ü–†–û–í–ï–†–ò–¢–¨ –ë–ê–ó–£ –ó–ù–ê–ù–ò–ô**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
python telegram-bot-test/check_collection.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**  
- –ï—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—É—Å—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º –∏–ª–∏ –ø–æ–∏—Å–∫–µ

### **2. üìö –ó–ê–ì–†–£–ó–ò–¢–¨ –î–û–ö–£–ú–ï–ù–¢–´ –û –¢–ï–ô–ü–ò–†–û–í–ê–ù–ò–ò**
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É –≤ **–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** PDF —Ñ–∞–π–ª—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∏–Ω–µ–∑–∏–æ—Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ú–µ—Ç–æ–¥—ã —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –±–æ–ª—è—Ö –≤ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–µ  
- –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è –∫ —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏—é

### **3. üéØ –£–õ–£–ß–®–ò–¢–¨ RAG –ü–û–ò–°–ö**
–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –≤ `rag.py`:

```python
# –°—Ç—Ä–æ–∫–∞ 138 - —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ö–æ–¥–∏–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
retriever = vectorstore.as_retriever(search_kwargs={"k": 5})  # –±—ã–ª–æ 3

# –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–π –ø–æ–∏—Å–∫
retriever = vectorstore.as_retriever(
    search_type="mmr",  # Maximum Marginal Relevance
    search_kwargs={"k": 5, "fetch_k": 10}
)
```

### **4. ü§ñ –°–ú–Ø–ì–ß–ò–¢–¨ LLM –§–ò–õ–¨–¢–†–ê–¶–ò–Æ**
–ò–∑–º–µ–Ω–∏—Ç—å system prompt –≤ `rag.py` (—Å—Ç—Ä–æ–∫–∞ 100):

```python
# –ë–´–õ–û (—Å—Ç—Ä–æ–≥–æ–µ):
"1. –ù–ï –î–û–î–£–ú–´–í–ê–ô! –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ ‚Äî —Å–∫–∞–∂–∏: "–í –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É.""

# –°–¢–ê–õ–û (–º—è–≥—á–µ):
"1. –û—Ç–≤–µ—á–∞–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ï—Å–ª–∏ –ø—Ä—è–º–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å –∫–æ—Å–≤–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –µ—ë. –¢–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º."
```

### **5. üîß –î–û–ë–ê–í–ò–¢–¨ –û–¢–õ–ê–î–û–ß–ù–£–Æ –ò–ù–§–û–†–ú–ê–¶–ò–Æ**
–í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `rag.py` –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 144
logger.info(f"üîç –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: {len(docs)}")
for i, doc in enumerate(docs):
    logger.info(f"   {i+1}. –ò—Å—Ç–æ—á–Ω–∏–∫: {doc.metadata.get('source', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}")
    logger.info(f"       –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: {doc.page_content[:200]}...")
```

---

## üöÄ **–ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**

### **–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
```bash
python telegram-bot-test/check_collection.py
```

### **–®–∞–≥ 2:** –ï—Å–ª–∏ –±–∞–∑–∞ –ø—É—Å—Ç–∞ - –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
1. –ù–∞–π—Ç–∏ PDF —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É –≤ –õ–°
3. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è "‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π"

### **–®–∞–≥ 3:** –ï—Å–ª–∏ –±–∞–∑–∞ –Ω–µ –ø—É—Å—Ç–∞ - —Å–º—è–≥—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é LLM
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `rag.py`, —Å—Ç—Ä–æ–∫–∞ ~100
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ Railway

---

## üéØ **–ù–ê–ò–ë–û–õ–ï–ï –í–ï–†–û–Ø–¢–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê:**
–í –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏–∏/–∫–∏–Ω–µ–∑–∏–æ—Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏ –±–æ–ª—è—Ö –≤ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞.